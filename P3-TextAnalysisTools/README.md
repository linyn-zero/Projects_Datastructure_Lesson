# P3 文本分析工具-实验报告
## 目录
- [P3 文本分析工具-实验报告](#p3-文本分析工具-实验报告)
  - [目录](#目录)
  - [程序功能简要说明](#程序功能简要说明)
      - [值得注意的细节：](#值得注意的细节)
  - [程序运行截图展示](#程序运行截图展示)
  - [程序运行方式简要说明。](#程序运行方式简要说明)
      - [程序执行逻辑](#程序执行逻辑)
  - [部分关键代码及其说明。](#部分关键代码及其说明)

## 程序功能简要说明

本程序通过clion开发。

本程序通过文件路径读取文本文件。

本程序能在一次处理文本后，提供对文本信息的简单分析功能：

0. 重新加载新的文本文件。
1. 显示所有出现在文本的单词。
2. 手动输入想要查询的单词或单词片段。显示搜索到的所有可能结果。
3. 显示所有找到的C++保留关键字。

#### 值得注意的细节：

1. 功能1~3在显示结果时，将同时打印单词与单词出现次数，并按单词出现次数降序打印。
2. 不仅如此，打印出的每个单词前都会附带一个序号（0~n），向程序中输入序号将给出对应单词的更多信息，其中包括具体出现在了哪一行以及在该行的出现次数。
3. 本程序可以识别源代码文件。
4. 本程序排除了一些易错细节，如英语所有格"'s"。以及将一些由下划线连接的或数字连接起来的变量名视为一个整体，如图。
![](func2_detail1.png "支持识别变量名")
5. 本程序对所有输入都进行了鲁棒性优化，如图。
![输入鲁棒性展示](robust1.png "输入鲁棒性展示")
6. 更多细节请移步我的头文件[TextAnalyzer.h](TextAnalyzer.h)下方的日志（日志写的不是很好，但也算开始培养习惯）


## 程序运行截图展示

**功能1 显示所有单词**

![功能1 显示所有单词展示](execution1.png 10% "功能1 显示所有单词")

**功能2 手动搜索单词**

![功能2 手动搜索单词展示](execution2.png "功能2 手动搜索单词")

**功能3 显示所有C++保留关键字**

![功能3 显示所有C++保留关键字展示](execution3.png "功能3 显示所有C++保留关键字")

**功能0 加载新的文档（这次是.cpp）**

![功能0 加载新的文档展示（这次是.cpp）](executionCode.png "功能0 加载新的文档（这次是.cpp）")

**加载大文件时对单个单词的展示效果**

![单个单词的展示](executionCode2.png "单个单词的展示")

**加载普通的英文文本**

![英文文本展示](executionText.png "英文文本展示")


## 程序运行方式简要说明。
**头文件**

![头文件展示](headFile.png "头文件展示")

**main函数**

![main函数展示](main.png "main函数展示")

#### 程序执行逻辑
1. *perform*函数首先调用*initContainer*函数。然后向用户请求指令，也就是功能0~3.
2. 在*perform*输入0自然就会结束*perform*。回到*main*函数的*while*循环体，执行新的一次*perform*。
3. *initContainer*的任务有：
   1. 清空4个单词容器
   2. 输入需要分析的文本地址
   3. 分析文本，将单词填入两个词库容器。（其中使用了*trimLine2Word*成员函数）
   4. 排序两个功能用容器
4. 功能1~3都会调用*ShowAllWord_byVECTOR*成员函数。区别在于： 
   1. 功能1打印所有单词，直接向该函数输入容器"用于功能1"即可。
   2. 功能2查到单词并打印所有可能需要先使用（静态成员函数）myKMP遍历"词库1"并将答案用新的容器存起来，再将新容器输入到该函数。
   3. 功能3打印所有找到的*保留关键字*，向该函数输入容器"用于功能3"即可。
5. 成员函数*ShowAllWord_byVECTOR*打印单词后，还提供了打印单个单词的功能，这时使用了成员函数*displayTheWord*。
6. 成员函数*displayTheWord*打印单个单词时使用了单词容器"词库2"。


## 部分关键代码及其说明。
**KMP**

![KMP展示](kmp.png "KMP展示")

**通过while实现robust输入的两个样例**

![inputRobust展示](inputRobust1.png "inputRobust展示")

![inputRobust展示](inputRobust2.png "inputRobust展示")

**initContainer函数分析过程展示**
由于没有想到更好的方法，我使用了两个布尔变量stopFlag1和stopFlag2来保证输入的完全性

![initContainer函数展示](init1.png "initContainer函数展示")

![trimLine2word函数展示](trimLine2word.png "trimLine2word函数展示")

***ShowAllWord_byVECTOR*函数逻辑展示**
重点是“提供后续服务”，使用了打印单个单词详细信息的函数

![ShowAllWord_byVECTOR函数展示](showVector.png "ShowAllWord_byVECTOR函数展示")

**手动输入功能函数展示**
使用while实现了执行逻辑的连贯性

![InputSearch函数展示](inputSearch.png "InputSearch函数展示")
